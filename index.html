<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>Task 4</title>
        <style type="text/css">
            table{
                width: 600px;
                height: 600px;
                border-spacing: 0;
                color: rgb(80, 80, 80);
            }
            td{
                background-color: white;
                text-align: center;
            }
            form{
                width: 600px;
                height: 600px;
                border: 1px solid #000;
                padding: 15px;
            }
            td:nth-child(10n){
                width: 30px;
                border-left: 1px solid lightgrey;
            }
            td:nth-child(10n+1){
                width: 30px;
                border-right: 1px solid lightgrey;
            }  
            tr:first-child td{
                border-bottom: 1px solid lightgrey;
                height: 30px;
            }
            tr:last-child td{
                border-top: 1px solid lightgrey;
                height: 30px;
            }
            tr:first-child td:first-child, tr:first-child td:last-child {
                border: none;
            }
            tr:last-child td:first-child, tr:last-child td:last-child {
                border: none;
            }
            .cell-black{
                background-color: #000;
            }

        </style>
        
    </head>
    <body>
        <form>
            <table>
                <tr>
                    <td></td>
                    <td>A</td>
                    <td>B</td>
                    <td>C</td>
                    <td>D</td>
                    <td>E</td>
                    <td>F</td>
                    <td>G</td>
                    <td>H</td>
                    <td></td>
                </tr>
                <tr>
                    <td>8</td>
                    <td id = "70" onclick = "touchCell(this.id)"></td>
                    <td id = "71" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "72" onclick = "touchCell(this.id)"></td>
                    <td id = "73" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "74" onclick = "touchCell(this.id)"></td>
                    <td id = "75" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "76" onclick = "touchCell(this.id)"></td>
                    <td id = "77" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td>8</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td id = "60" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "61" onclick = "touchCell(this.id)"></td>
                    <td id = "62" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "63" onclick = "touchCell(this.id)"></td>
                    <td id = "64" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "65" onclick = "touchCell(this.id)"></td>
                    <td id = "66" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "67" onclick = "touchCell(this.id)"></td>
                    <td>7</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td id = "50" onclick = "touchCell(this.id)"></td>
                    <td id = "51" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "52" onclick = "touchCell(this.id)"></td>
                    <td id = "53" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "54" onclick = "touchCell(this.id)"></td>
                    <td id = "55" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "56" onclick = "touchCell(this.id)"></td>
                    <td id = "57" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td>6</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td id = "40" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "41" onclick = "touchCell(this.id)"></td>
                    <td id = "42" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "43" onclick = "touchCell(this.id)"></td>
                    <td id = "44" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "45" onclick = "touchCell(this.id)"></td>
                    <td id = "46" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "47" onclick = "touchCell(this.id)"></td>
                    <td>5</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td id = "30" onclick = "touchCell(this.id)"></td>
                    <td id = "31" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "32" onclick = "touchCell(this.id)"></td>
                    <td id = "33" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "34" onclick = "touchCell(this.id)"></td>
                    <td id = "35" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "36" onclick = "touchCell(this.id)"></td>
                    <td id = "37" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td id = "20" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "21" onclick = "touchCell(this.id)"></td>
                    <td id = "22" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "23" onclick = "touchCell(this.id)"></td>
                    <td id = "24" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "25" onclick = "touchCell(this.id)"></td>
                    <td id = "26" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "27" onclick = "touchCell(this.id)"></td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td id = "10" onclick = "touchCell(this.id)"></td>
                    <td id = "11" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "12" onclick = "touchCell(this.id)"></td>
                    <td id = "13" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "14" onclick = "touchCell(this.id)"></td>
                    <td id = "15" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "16" onclick = "touchCell(this.id)"></td>
                    <td id = "17" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td id = "00" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "01" onclick = "touchCell(this.id)"></td>
                    <td id = "02" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "03" onclick = "touchCell(this.id)"></td>
                    <td id = "04" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "05" onclick = "touchCell(this.id)"></td>
                    <td id = "06" class = "cell-black" onclick = "touchCell(this.id)"></td>
                    <td id = "07" onclick = "touchCell(this.id)"></td>
                    <td>1</td>
                </tr>
                <tr>
                    <td></td>
                    <td>A</td>
                    <td>B</td>
                    <td>C</td>
                    <td>D</td>
                    <td>E</td>
                    <td>F</td>
                    <td>G</td>
                    <td>H</td>
                    <td></td>
                </tr>

            </table>
        </form>
        <script>
            //поиск возможных ходов из ячейки id
            function findMoves(id){
                var i = +id[0];                 //номер вертикали позиции
                var k = +id[1];                 //номер горизонтали позиции
                var arrMoves = [];              //массив с вариантами ходов

                if ( (i + 1) < 8){
                    if ( (k - 2) >= 0){
                        arrMoves.push(String(i + 1) + String(k - 2) );
                    }
                    if ( (k + 2) <8 ){
                        arrMoves.push(String(i + 1) + String(k + 2) );
                    }
                }
                if ( (i + 2) < 8){
                    if ( (k - 1) >= 0){
                        arrMoves.push(String(i + 2) + String(k - 1) );
                    }
                    if ( (k + 1) < 8){
                        arrMoves.push(String(i + 2) + String(k + 1) );
                    }
                }  
                if ( (i - 1) >= 0){
                    if ( (k - 2) >= 0){
                        arrMoves.push(String(i - 1) + String(k - 2) );
                    }
                    if ( (k + 2) < 8){
                        arrMoves.push(String(i - 1) + String(k + 2) );
                    }
                }
                if ( (i - 2) >= 0){
                    if ( (k - 1) >= 0){
                        arrMoves.push(String(i -2) + String(k - 1) );
                    }
                    if ( (k + 1) < 8){
                        arrMoves.push(String(i - 2) + String(k + 1) );
                    }
                }
                
                return (arrMoves);
            }

            //сбрасываем програмное изменение backgroundcolor
            function resetBgColor(){ 
                var id = 0;
                var elem;
                var bgColor;
                for (var i = 0; i < 8; i++){
                    for ( var k = 0; k < 8; k++){
                        id=(String(i) + String(k) );
                        elem = document.getElementById(id);
                        bgColor = getComputedStyle(elem).backgroundColor;
                        elem.style.backgroundColor = "";
                    }
                }
            }

            //обрабатываем нажатие на ячейку
            function touchCell(id){
                resetBgColor();
                var arrMoves = findMoves(id);
                var elem = document.getElementById(id);
                var bgColor=getComputedStyle(elem).backgroundColor;
                elem.style.backgroundColor = "blue";
                for (var i = 0; i < arrMoves.length; i++){
                    document.getElementById( arrMoves[i] ).style.backgroundColor = "green";
                }
            }
        </script>
    </body>

</html>